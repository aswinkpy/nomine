
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nomination Form</title>
    <!-- Include jsPDF library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <center><h1>NOMINATION FORM</h1></center>
    <form id="nominationForm" onsubmit="generatePDF(event)">
        <label for="nominee_name">Name of Nominee:</label>
        <input type="text" id="nominee_name" name="nominee_name" required>

        <label>Marital Status:</label>
        <div class="radio-group">
            <input type="radio" id="single" name="marital_status" value="Single">
            <label for="single">Single</label>
            <input type="radio" id="married" name="marital_status" value="Married">
            <label for="married">Married</label>
        </div>

        <label for="address">Address:</label>
        <textarea id="address" name="address" rows="3" required></textarea>

        <label for="aadhaar_number">Aadhaar Number:</label>
        <input type="text" id="aadhaar_number" name="aadhaar_number" required>

        <label for="relation_with_subscriber">Relation with Subscriber:</label>
        <textarea id="relation_with_subscriber" name="relation_with_subscriber" rows="2"></textarea>

        <label for="age">Age:</label>
        <input type="number" id="age" name="age" required>

        <label for="share_payable">Share Payable in Percentage:</label>
        <input type="number" id="share_payable" name="share_payable" required>

        <label for="place">Place:</label>
        <textarea id="place" name="place" rows="1"></textarea>

        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required>

        <label for="account_number">Account Number:</label>
        <input type="text" id="account_number" name="account_number" required>

        <label for="witness_name_1">Witness Name 1:</label>
        <input type="text" id="witness_name_1" name="witness_name_1" required>

        <label for="witness_address_1">Witness Address 1:</label>
        <textarea id="witness_address_1" name="witness_address_1" rows="2"></textarea>

        <button type="submit" class="submit-button">Submit</button>
    </form>

    <script>
        async function generatePDF(event) {
            event.preventDefault(); // Prevent form submission

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('p', 'mm', 'a4');

            // Draw Border
            doc.setLineWidth(1);
            doc.rect(10, 10, 190, 277); // x, y, width, height

            // Add Title Heading
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.text('Nomination Form Details', 105, 20, { align: 'center' });

            // Add Initial Declaration Text
            const nomineeName = document.getElementById('nominee_name').value;
            const maritalStatus = document.querySelector('input[name="marital_status"]:checked').value;
            const declaration = `I, ${nomineeName} hereby nominate the person(s) mentioned below to receive the amount that may stand to my credit in the Fund in the event of my death before that amount has become payable or having become payable, has not been paid. I also declare that my marital status is ${maritalStatus}.`;
            doc.setFontSize(12);
            doc.setFont('helvetica', 'normal');
            doc.text(declaration, 20, 40, { maxWidth: 170, align: 'justify' });

            // Table Headers
            doc.setFont('helvetica', 'bold');
            doc.text('Name, full permanent address and Aadhaar no. of nominees', 20, 70);
            doc.text('Relation with the subscriber', 20, 80);
            doc.text('Age', 20, 90);
            doc.text('Share payable to each in percentage', 20, 100);
            doc.text('Contingencies on the happening of which nomination shall become invalid', 20, 110);
            doc.text('Name, address, Aadhaar no., relationship and age of the person to whom the right of the nominee shall pass in the event of his predeceasing the subscriber', 20, 120);
            doc.text('Name, address, and Aadhaar No. of the person to whom share is to be paid on behalf of the minor', 20, 130);

            // Form Details (dynamic content)
            let yOffset = 140; // Starting Y offset for the details

            const formData = new FormData(document.getElementById('nominationForm'));

            formData.forEach((value, key) => {
                // Format the key into a readable label
                const label = key.replace(/_/g, ' ').replace(/^\w/, (c) => c.toUpperCase());

                // Add the label and value
                doc.setFont('helvetica', 'normal');
                doc.text(`${label}: ${value}`, 20, yOffset, { maxWidth: 170 });
                yOffset += 10;

                // Handle page breaks if the content exceeds page height
                if (yOffset > 270) {
                    doc.addPage();
                    doc.rect(10, 10, 190, 277); // Redraw border on new page
                    yOffset = 20;
                }
            });

            // Add Place, Date, and Signature Lines
            doc.text(`Place: ${formData.get('place') || ''}`, 20, yOffset);
            yOffset += 10;
            doc.text(`Date: ${formData.get('date') || ''}`, 20, yOffset);
            yOffset += 20;
            doc.text('Name, designation, office address, PEN and signature of the subscriber:', 20, yOffset);
            yOffset += 10;
            doc.text(`Account No: ${formData.get('account_number') || ''}`, 20, yOffset);

            // Footer for Witnesses
            yOffset += 20;
            doc.text('Witnesses:', 20, yOffset);
            yOffset += 10;
            doc.text(`1. ${formData.get('witness_name_1') || ''}`, 20, yOffset);
            yOffset += 10;
            doc.text(`2.`, 20, yOffset + 10); // Placeholder for Witness 2 if required

            // Add Instructions
            yOffset += 30;
            doc.setFontSize(10);
            doc.setFont('helvetica', 'italic');
            doc.text('Note: The nomination made by a subscriber who was not married at the time of filing nomination shall become invalid on getting married.', 20, yOffset, { maxWidth: 170 });
            yOffset += 10;
            doc.text('Instructions:', 20, yOffset);
            yOffset += 5;
            doc.text('Column 1 - A subscriber can nominate more than one person. If he/she has a family as defined in General Provident Fund (K) Rules, the nomination shall not be in favour of any person who is not a member of the family.', 20, yOffset, { maxWidth: 170 });

            // Save the generated PDF
            doc.save('Nomination_Form.pdf');
        }
    </script>
</body>
</html>


